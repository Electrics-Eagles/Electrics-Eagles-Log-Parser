<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <title></title>
   <script src="https://cdn.plot.ly/plotly-2.4.2.min.js"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
   <link rel="stylesheet" href="styles.css"></link>
  </head>
  <script type="text/javascript">
      const invoke = window.__TAURI__.invoke
    sellected=[]

    var amount_times_pressed=0;
names = [ "acc_x", "acc_y", "acc_z", "gyro_x", "gyro_y", "gyro_z", "angle_pitch_acc", "angle_roll_acc", "esc_1", "esc_2", "esc_3", "esc_4", "reciver_ch1", "reciver_ch2", "reciver_ch3", "reciver_ch4", "reciver_ch5", "reciver_ch6", "pid_output_pitch", "pid_output_roll", "pid_pitch_setpoint", "pid_roll_setpoint", "pid_yaw_setpoint", "pitch_level_correction", "roll_level_correction", "time_spent", "temp" ]
  function init() {
  for (let i = 0; i < names.length; i++) {
    $('#checkboxes').append('<li><input type="checkbox" class="btn-styled" onclick="onCheck('+i+')" type="button">'+names[i]+'</input></li>');
  }
}
var update = {
  title: 'New Title',
  'xaxis.range': [0,1],
  yaxis: {
    showgrid: true,
    zeroline: true,
    showline: true,
    mirror: 'ticks',
    gridcolor: '#bdbdbd',
    gridwidth: 2,
    zerolinecolor: '#969696',
    //zerolinewidth: 4,
  }
}
function onCheck(num){
console.log(num);
sellected.push(num)
}

function select_file() {
   invoke('select_file')
}

function sellected_api() {
  if(amount_times_pressed != 0 ){
   document.getElementById("tester").remove()
   invoke('get_selected', { invokeMessage: sellected }).then((message) => perpare_plot(message,sellected))
  }
  else {
 invoke('get_selected', { invokeMessage: sellected }).then((message) => perpare_plot(message,sellected))
  }
 
 amount_times_pressed=amount_times_pressed+1;
}
function generate_array(size){
  var array=[];
  for(let x=0; x<size; x++){
    array.push(x);
  }
  return array;
}


 function size(input_array) {
    let y_array=[];
    for(let a=0; a<input_array.length; a++){
      y_array.push(a);
    }
    return y_array;
  }
function perpare_plot(argument,sellected) {

var  data=[];
  for (let a =0 ; a<argument.length; a++){
    var trace = {
      x:size(argument[a]),
      y:(argument[a]),
      type: 'scatter',
      name:names[sellected[a]]
    };
    data.push(trace)
  }



Plotly.newPlot('tester', data);
  // body...
}
  </script>

  
  <body onload="init()">
    <button onclick="select_file()">Open log</button>
    <header>
        <div id="checkboxes">
          <ul class="checkbox"> 
          

        </div>
        <div id="tester" style="width:600px;height:250px;"></div>
    </header>
    <main></main>

    <button  onclick="sellected_api()"> Save</button>
    <footer></footer>
    <script>


</script>
  </body>
</html>
